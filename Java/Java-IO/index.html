<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">


  
  
    
    
  <script src="/Blog/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/Blog/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/Blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/Blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/Blog/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/Blog/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/Blog/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/Blog/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/Blog/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Java,NIO," />





  <link rel="alternate" href="/Blog/atom.xml" title="StormAaronçš„æŠ€æœ¯ç«™" type="application/atom+xml" />






<meta name="description" content="å‰è¨€ Java çš„ I/O å¤§æ¦‚å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ç±»ï¼š  ç£ç›˜æ“ä½œï¼šFile å­—èŠ‚æ“ä½œï¼šInputStream å’Œ OutputStream å­—ç¬¦æ“ä½œï¼šReader å’Œ Writer å¯¹è±¡æ“ä½œï¼šSerializable ç½‘ç»œæ“ä½œï¼šSocket æ–°çš„è¾“å…¥/è¾“å‡ºï¼šNIO  å‚è€ƒäº†CYC2018çš„åšæ–‡ï¼šgithub-CYC2018ğŸ–Š">
<meta name="keywords" content="Java,NIO">
<meta property="og:type" content="article">
<meta property="og:title" content="Java-IO">
<meta property="og:url" content="https://uncleaaron.github.io/Blog/Java/Java-IO/index.html">
<meta property="og:site_name" content="StormAaronçš„æŠ€æœ¯ç«™">
<meta property="og:description" content="å‰è¨€ Java çš„ I/O å¤§æ¦‚å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ç±»ï¼š  ç£ç›˜æ“ä½œï¼šFile å­—èŠ‚æ“ä½œï¼šInputStream å’Œ OutputStream å­—ç¬¦æ“ä½œï¼šReader å’Œ Writer å¯¹è±¡æ“ä½œï¼šSerializable ç½‘ç»œæ“ä½œï¼šSocket æ–°çš„è¾“å…¥/è¾“å‡ºï¼šNIO  å‚è€ƒäº†CYC2018çš„åšæ–‡ï¼šgithub-CYC2018ğŸ–Š">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://uncleaaron.github.io/Blog/Java/Java-IO/DP-Decorator-java.io.png">
<meta property="og:image" content="https://uncleaaron.github.io/Java-IO//ClienteServidorSockets1521731145260.jpg">
<meta property="og:image" content="https://uncleaaron.github.io/Blog/Java/Java-IO/NIO.jpg">
<meta property="og:image" content="https://uncleaaron.github.io/Blog/Java/Java-IO/1bea398f-17a7-4f67-a90b-9e2d243eaa9a.png">
<meta property="og:image" content="https://uncleaaron.github.io/Blog/Java/Java-IO/80804f52-8815-4096-b506-48eef3eed5c6.png">
<meta property="og:image" content="https://uncleaaron.github.io/Blog/Java/Java-IO/952e06bd-5a65-4cab-82e4-dd1536462f38.png">
<meta property="og:image" content="https://uncleaaron.github.io/Blog/Java/Java-IO/b5bdcbe2-b958-4aef-9151-6ad963cb28b4.png">
<meta property="og:image" content="https://uncleaaron.github.io/Blog/Java/Java-IO/67bf5487-c45d-49b6-b9c0-a058d8c68902.png">
<meta property="og:image" content="https://uncleaaron.github.io/Blog/Java/Java-IO/4d930e22-f493-49ae-8dff-ea21cd6895dc.png">
<meta property="og:image" content="https://uncleaaron.github.io/Blog/Java/Java-IO/NIO.jpg">
<meta property="og:updated_time" content="2018-09-07T00:56:29.639Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java-IO">
<meta name="twitter:description" content="å‰è¨€ Java çš„ I/O å¤§æ¦‚å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ç±»ï¼š  ç£ç›˜æ“ä½œï¼šFile å­—èŠ‚æ“ä½œï¼šInputStream å’Œ OutputStream å­—ç¬¦æ“ä½œï¼šReader å’Œ Writer å¯¹è±¡æ“ä½œï¼šSerializable ç½‘ç»œæ“ä½œï¼šSocket æ–°çš„è¾“å…¥/è¾“å‡ºï¼šNIO  å‚è€ƒäº†CYC2018çš„åšæ–‡ï¼šgithub-CYC2018ğŸ–Š">
<meta name="twitter:image" content="https://uncleaaron.github.io/Blog/Java/Java-IO/DP-Decorator-java.io.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/Blog/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://uncleaaron.github.io/Blog/Java/Java-IO/"/>





  <title>Java-IO | StormAaronçš„æŠ€æœ¯ç«™</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/Blog/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">StormAaronçš„æŠ€æœ¯ç«™</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/Blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/Blog/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/Blog/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/Blog/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/Blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://uncleaaron.github.io/Blog/Blog/Java/Java-IO/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aaron.H">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/Blog/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="StormAaronçš„æŠ€æœ¯ç«™">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java-IO</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-08-06T11:29:19+08:00">
                2018-08-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/Blog/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  4,894
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  20
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote>
<p>Java çš„ I/O å¤§æ¦‚å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li>ç£ç›˜æ“ä½œï¼šFile</li>
<li>å­—èŠ‚æ“ä½œï¼šInputStream å’Œ OutputStream</li>
<li>å­—ç¬¦æ“ä½œï¼šReader å’Œ Writer</li>
<li>å¯¹è±¡æ“ä½œï¼šSerializable</li>
<li>ç½‘ç»œæ“ä½œï¼šSocket</li>
<li>æ–°çš„è¾“å…¥/è¾“å‡ºï¼šNIO</li>
</ul>
<p>å‚è€ƒäº†CYC2018çš„åšæ–‡ï¼š<a href="https://github.com/CyC2018/Interview-Notebook/blob/master/notes/Java%20åŸºç¡€.md" target="_blank" rel="noopener">github-CYC2018</a>ğŸ–Š </p>
</blockquote>
<a id="more"></a>
<!-- GFM-TOC -->
<ul>
<li><a href="#ä¸€æ¦‚è§ˆ">ä¸€ã€æ¦‚è§ˆ</a></li>
<li><a href="#äºŒç£ç›˜æ“ä½œ">äºŒã€ç£ç›˜æ“ä½œ</a></li>
<li><a href="#ä¸‰å­—èŠ‚æ“ä½œ">ä¸‰ã€å­—èŠ‚æ“ä½œ</a></li>
<li><a href="#å››å­—ç¬¦æ“ä½œ">å››ã€å­—ç¬¦æ“ä½œ</a></li>
<li><a href="#äº”å¯¹è±¡æ“ä½œ">äº”ã€å¯¹è±¡æ“ä½œ</a></li>
<li><a href="#å…­ç½‘ç»œæ“ä½œ">å…­ã€ç½‘ç»œæ“ä½œ</a><ul>
<li><a href="#inetaddress">InetAddress</a></li>
<li><a href="#url">URL</a></li>
<li><a href="#sockets">Sockets</a></li>
<li><a href="#datagram">Datagram</a></li>
</ul>
</li>
<li><a href="#ä¸ƒnio">ä¸ƒã€NIO</a><ul>
<li><a href="#æµä¸å—">æµä¸å—</a></li>
<li><a href="#é€šé“ä¸ç¼“å†²åŒº">é€šé“ä¸ç¼“å†²åŒº</a></li>
<li><a href="#ç¼“å†²åŒºçŠ¶æ€å˜é‡">ç¼“å†²åŒºçŠ¶æ€å˜é‡</a></li>
<li><a href="#æ–‡ä»¶-nio-å®ä¾‹">æ–‡ä»¶ NIO å®ä¾‹</a></li>
<li><a href="#é€‰æ‹©å™¨">é€‰æ‹©å™¨</a></li>
<li><a href="#å¥—æ¥å­—-nio-å®ä¾‹">å¥—æ¥å­— NIO å®ä¾‹</a></li>
<li><a href="#å†…å­˜æ˜ å°„æ–‡ä»¶">å†…å­˜æ˜ å°„æ–‡ä»¶</a></li>
<li><a href="#å¯¹æ¯”">å¯¹æ¯”</a></li>
</ul>
</li>
<li><a href="#å…«å‚è€ƒèµ„æ–™">å…«ã€å‚è€ƒèµ„æ–™</a><!-- GFM-TOC -->
</li>
</ul>
<h1 id="ä¸€ã€æ¦‚è§ˆ"><a href="#ä¸€ã€æ¦‚è§ˆ" class="headerlink" title="ä¸€ã€æ¦‚è§ˆ"></a>ä¸€ã€æ¦‚è§ˆ</h1><p>Java çš„ I/O å¤§æ¦‚å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li>ç£ç›˜æ“ä½œï¼šFile</li>
<li>å­—èŠ‚æ“ä½œï¼šInputStream å’Œ OutputStream</li>
<li>å­—ç¬¦æ“ä½œï¼šReader å’Œ Writer</li>
<li>å¯¹è±¡æ“ä½œï¼šSerializable</li>
<li>ç½‘ç»œæ“ä½œï¼šSocket</li>
<li>æ–°çš„è¾“å…¥/è¾“å‡ºï¼šNIO</li>
</ul>
<h1 id="äºŒã€ç£ç›˜æ“ä½œ"><a href="#äºŒã€ç£ç›˜æ“ä½œ" class="headerlink" title="äºŒã€ç£ç›˜æ“ä½œ"></a>äºŒã€ç£ç›˜æ“ä½œ</h1><p>File ç±»å¯ä»¥ç”¨äºè¡¨ç¤ºæ–‡ä»¶å’Œç›®å½•çš„ä¿¡æ¯ï¼Œä½†æ˜¯å®ƒä¸è¡¨ç¤ºæ–‡ä»¶çš„å†…å®¹ã€‚</p>
<p>é€’å½’åœ°è¾“å‡ºä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">listAllFiles</span><span class="params">(File dir)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dir == <span class="keyword">null</span> || !dir.exists()) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (dir.isFile()) &#123;	<span class="comment">// æ˜¯æ–‡ä»¶ï¼Œè¾“å‡ºæ–‡ä»¶å</span></span><br><span class="line">        System.out.println(dir.getName());</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (File file : dir.listFiles()) &#123;	<span class="comment">// é€’å½’éå†æ–‡ä»¶</span></span><br><span class="line">        listAllFiles(file);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä¸‰ã€å­—èŠ‚æ“ä½œ"><a href="#ä¸‰ã€å­—èŠ‚æ“ä½œ" class="headerlink" title="ä¸‰ã€å­—èŠ‚æ“ä½œ"></a>ä¸‰ã€å­—èŠ‚æ“ä½œ</h1><p>ä½¿ç”¨å­—èŠ‚æµæ“ä½œè¿›è¡Œæ–‡ä»¶å¤åˆ¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyFile</span><span class="params">(String src, String dist)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    FileInputStream in = <span class="keyword">new</span> FileInputStream(src);</span><br><span class="line">    FileOutputStream out = <span class="keyword">new</span> FileOutputStream(dist);</span><br><span class="line">    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">20</span> * <span class="number">1024</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// read() æœ€å¤šè¯»å– buffer.length ä¸ªå­—èŠ‚</span></span><br><span class="line">    <span class="comment">// è¿”å›çš„æ˜¯å®é™…è¯»å–çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="comment">// è¿”å› -1 çš„æ—¶å€™è¡¨ç¤ºè¯»åˆ° eofï¼Œå³æ–‡ä»¶å°¾</span></span><br><span class="line">    <span class="keyword">while</span> (in.read(buffer, <span class="number">0</span>, buffer.length) != -<span class="number">1</span>) &#123;</span><br><span class="line">        out.write(buffer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    in.close();</span><br><span class="line">    out.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><div align="center"> <img src="/Blog/Java/Java-IO/DP-Decorator-java.io.png" width="500"> </div><br></p>
<p>Java I/O ä½¿ç”¨äº†<strong>è£…é¥°è€…æ¨¡å¼æ¥å®ç°ã€‚ä»¥ InputStream</strong> ä¸ºä¾‹ï¼Œ</p>
<ul>
<li>InputStream æ˜¯æŠ½è±¡ç»„ä»¶ï¼›</li>
<li>FileInputStream æ˜¯ InputStream çš„å­ç±»ï¼Œå±äºå…·ä½“ç»„ä»¶ï¼Œæä¾›äº†å­—èŠ‚æµçš„è¾“å…¥æ“ä½œï¼›</li>
<li>FilterInputStream å±äºæŠ½è±¡è£…é¥°è€…ï¼Œè£…é¥°è€…ç”¨äºè£…é¥°ç»„ä»¶ï¼Œä¸ºç»„ä»¶æä¾›é¢å¤–çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ BufferedInputStream ä¸º FileInputStream æä¾›ç¼“å­˜çš„åŠŸèƒ½ã€‚</li>
</ul>
<p><strong>å®ä¾‹åŒ–ä¸€ä¸ªå…·æœ‰ç¼“å­˜åŠŸèƒ½çš„å­—èŠ‚æµå¯¹è±¡æ—¶ï¼Œåªéœ€è¦åœ¨ FileInputStream å¯¹è±¡ä¸Šå†å¥—ä¸€å±‚ BufferedInputStream å¯¹è±¡å³å¯ã€‚</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FileInputStream fileInputStream = <span class="keyword">new</span> FileInputStream(filePath);</span><br><span class="line">BufferedInputStream bufferedInputStream = <span class="keyword">new</span> BufferedInputStream(fileInputStream);</span><br></pre></td></tr></table></figure>
<p>DataInputStream è£…é¥°è€…æä¾›äº†å¯¹æ›´å¤šæ•°æ®ç±»å‹è¿›è¡Œè¾“å…¥çš„æ“ä½œï¼Œæ¯”å¦‚ intã€double ç­‰åŸºæœ¬ç±»å‹ã€‚</p>
<h1 id="å››ã€å­—ç¬¦æ“ä½œ"><a href="#å››ã€å­—ç¬¦æ“ä½œ" class="headerlink" title="å››ã€å­—ç¬¦æ“ä½œ"></a>å››ã€å­—ç¬¦æ“ä½œ</h1><p>ä¸ç®¡æ˜¯ç£ç›˜è¿˜æ˜¯ç½‘ç»œä¼ è¾“ï¼Œæœ€å°çš„å­˜å‚¨å•å…ƒéƒ½æ˜¯å­—èŠ‚ï¼Œè€Œä¸æ˜¯å­—ç¬¦ã€‚ä½†æ˜¯åœ¨ç¨‹åºä¸­æ“ä½œçš„é€šå¸¸æ˜¯å­—ç¬¦å½¢å¼çš„æ•°æ®ï¼Œå› æ­¤éœ€è¦æä¾›å¯¹å­—ç¬¦è¿›è¡Œæ“ä½œçš„æ–¹æ³•ã€‚</p>
<ul>
<li>InputStreamReader å®ç°ä»å­—èŠ‚æµè§£ç æˆå­—ç¬¦æµï¼›</li>
<li>OutputStreamWriter å®ç°å­—ç¬¦æµç¼–ç æˆä¸ºå­—èŠ‚æµã€‚</li>
</ul>
<p>é€è¡Œè¾“å‡ºæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">readFileContent</span><span class="params">(String filePath)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    FileReader fileReader = <span class="keyword">new</span> FileReader(filePath);</span><br><span class="line">    BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(fileReader);</span><br><span class="line">    String line;</span><br><span class="line">    <span class="keyword">while</span> ((line = bufferedReader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        System.out.println(line);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è£…é¥°è€…æ¨¡å¼ä½¿å¾— BufferedReader ç»„åˆäº†ä¸€ä¸ª Reader å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// åœ¨è°ƒç”¨ BufferedReader çš„ close() æ–¹æ³•æ—¶ä¼šå»è°ƒç”¨ fileReader çš„ close() æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// å› æ­¤åªè¦ä¸€ä¸ª close() è°ƒç”¨å³å¯</span></span><br><span class="line">    bufferedReader.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–ç å°±æ˜¯æŠŠå­—ç¬¦è½¬æ¢ä¸ºå­—èŠ‚ï¼Œè€Œè§£ç æ˜¯æŠŠå­—èŠ‚é‡æ–°ç»„åˆæˆå­—ç¬¦ã€‚</p>
<p>å¦‚æœç¼–ç å’Œè§£ç è¿‡ç¨‹ä½¿ç”¨ä¸åŒçš„ç¼–ç æ–¹å¼é‚£ä¹ˆå°±å‡ºç°äº†ä¹±ç ã€‚</p>
<ul>
<li>GBK ç¼–ç ä¸­ï¼Œä¸­æ–‡å­—ç¬¦å  2 ä¸ªå­—èŠ‚ï¼Œè‹±æ–‡å­—ç¬¦å  1 ä¸ªå­—èŠ‚ï¼›</li>
<li>UTF-8 ç¼–ç ä¸­ï¼Œä¸­æ–‡å­—ç¬¦å  3 ä¸ªå­—èŠ‚ï¼Œè‹±æ–‡å­—ç¬¦å  1 ä¸ªå­—èŠ‚ï¼›</li>
<li>UTF-16be ç¼–ç ä¸­ï¼Œä¸­æ–‡å­—ç¬¦å’Œè‹±æ–‡å­—ç¬¦éƒ½å  2 ä¸ªå­—èŠ‚ã€‚</li>
</ul>
<p>UTF-16be ä¸­çš„ be æŒ‡çš„æ˜¯ Big Endianï¼Œä¹Ÿå°±æ˜¯å¤§ç«¯ã€‚ç›¸åº”åœ°ä¹Ÿæœ‰ UTF-16leï¼Œle æŒ‡çš„æ˜¯ Little Endianï¼Œä¹Ÿå°±æ˜¯å°ç«¯ã€‚</p>
<p><strong>Java ä½¿ç”¨åŒå­—èŠ‚ç¼–ç  UTF-16be</strong>ï¼Œè¿™ä¸æ˜¯æŒ‡ Java åªæ”¯æŒè¿™ä¸€ç§ç¼–ç æ–¹å¼ï¼Œè€Œæ˜¯è¯´ char è¿™ç§ç±»å‹ä½¿ç”¨ UTF-16be è¿›è¡Œç¼–ç ã€‚<strong>char ç±»å‹å  16 ä½</strong>ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼ŒJava ä½¿ç”¨è¿™ç§åŒå­—èŠ‚ç¼–ç æ˜¯ä¸ºäº†è®©ä¸€ä¸ªä¸­æ–‡æˆ–è€…ä¸€ä¸ªè‹±æ–‡éƒ½èƒ½ä½¿ç”¨ä¸€ä¸ª char æ¥å­˜å‚¨ã€‚</p>
<p>String å¯ä»¥çœ‹æˆä¸€ä¸ªå­—ç¬¦åºåˆ—ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªç¼–ç æ–¹å¼å°†å®ƒç¼–ç ä¸ºå­—èŠ‚åºåˆ—ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªç¼–ç æ–¹å¼å°†ä¸€ä¸ªå­—èŠ‚åºåˆ—è§£ç ä¸º Stringã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String str1 = <span class="string">"ä¸­æ–‡"</span>;</span><br><span class="line"><span class="keyword">byte</span>[] bytes = str1.getBytes(<span class="string">"UTF-8"</span>);</span><br><span class="line">String str2 = <span class="keyword">new</span> String(bytes, <span class="string">"UTF-8"</span>);</span><br><span class="line">System.out.println(str2);</span><br></pre></td></tr></table></figure>
<p>åœ¨è°ƒç”¨æ— å‚æ•° getBytes() æ–¹æ³•æ—¶ï¼Œé»˜è®¤çš„ç¼–ç æ–¹å¼ä¸æ˜¯ UTF-16beã€‚åŒå­—èŠ‚ç¼–ç çš„å¥½å¤„æ˜¯å¯ä»¥ä½¿ç”¨ä¸€ä¸ª char å­˜å‚¨ä¸­æ–‡å’Œè‹±æ–‡ï¼Œè€Œå°† String è½¬ä¸º bytes[] å­—èŠ‚æ•°ç»„å°±ä¸å†éœ€è¦è¿™ä¸ªå¥½å¤„ï¼Œå› æ­¤ä¹Ÿå°±ä¸å†éœ€è¦åŒå­—èŠ‚ç¼–ç ã€‚<strong>getBytes() çš„é»˜è®¤ç¼–ç æ–¹å¼ä¸å¹³å°æœ‰å…³ï¼Œä¸€èˆ¬ä¸º UTF-8ã€‚</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span>[] bytes = str1.getBytes();</span><br></pre></td></tr></table></figure>
<h1 id="äº”ã€å¯¹è±¡æ“ä½œ"><a href="#äº”ã€å¯¹è±¡æ“ä½œ" class="headerlink" title="äº”ã€å¯¹è±¡æ“ä½œ"></a>äº”ã€å¯¹è±¡æ“ä½œ</h1><p>åºåˆ—åŒ–å°±æ˜¯å°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢æˆå­—èŠ‚åºåˆ—ï¼Œæ–¹ä¾¿å­˜å‚¨å’Œä¼ è¾“ã€‚</p>
<ul>
<li>åºåˆ—åŒ–ï¼šObjectOutputStream.writeObject()</li>
<li>ååºåˆ—åŒ–ï¼šObjectInputStream.readObject()</li>
</ul>
<p>åºåˆ—åŒ–çš„ç±»éœ€è¦<strong>å®ç° Serializable æ¥å£</strong>ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œæ²¡æœ‰ä»»ä½•æ–¹æ³•éœ€è¦å®ç°ï¼Œä½†æ˜¯å¦‚æœä¸å»å®ç°å®ƒçš„è¯è€Œè¿›è¡Œåºåˆ—åŒ–ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">    A a1 = <span class="keyword">new</span> A(<span class="number">123</span>, <span class="string">"abc"</span>);</span><br><span class="line">    String objectFile = <span class="string">"file/a1"</span>;</span><br><span class="line">    </span><br><span class="line">    ObjectOutputStream objectOutputStream = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(objectFile));	<span class="comment">// åºåˆ—åŒ–å­—èŠ‚æµåˆå§‹åŒ–ï¼ˆç”¨è£…é¥°è€…æ¨¡å¼åŒ…è£…Fileè¾“å‡ºå­—èŠ‚æµï¼‰</span></span><br><span class="line">    objectOutputStream.writeObject(a1);	<span class="comment">// åºåˆ—åŒ–è¾“å‡ºa1å¯¹è±¡åˆ°æ–‡ä»¶</span></span><br><span class="line">    objectOutputStream.close();</span><br><span class="line"></span><br><span class="line">    ObjectInputStream objectInputStream = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(objectFile));</span><br><span class="line">    A a2 = (A) objectInputStream.readObject();</span><br><span class="line">    objectInputStream.close();</span><br><span class="line">    </span><br><span class="line">    System.out.println(a2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> String y;</span><br><span class="line"></span><br><span class="line">    A(<span class="keyword">int</span> x, String y) &#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"x = "</span> + x + <span class="string">"  "</span> + <span class="string">"y = "</span> + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ä¼šå¯¹é™æ€å˜é‡è¿›è¡Œåºåˆ—åŒ–ï¼Œå› ä¸ºåºåˆ—åŒ–åªæ˜¯ä¿å­˜å¯¹è±¡çš„çŠ¶æ€ï¼Œé™æ€å˜é‡å±äºç±»çš„çŠ¶æ€ã€‚</p>
<p><strong>transient</strong> <strong>å…³é”®å­—å¯ä»¥ä½¿ä¸€äº›å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–</strong>ã€‚</p>
<p><strong>ArrayList ä¸­å­˜å‚¨æ•°æ®çš„æ•°ç»„æ˜¯ç”¨ transient ä¿®é¥°çš„</strong>ï¼Œå› ä¸ºè¿™ä¸ªæ•°ç»„æ˜¯<strong>åŠ¨æ€æ‰©å±•</strong>çš„ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç©ºé—´éƒ½è¢«ä½¿ç”¨ï¼Œå› æ­¤å°±ä¸éœ€è¦æ‰€æœ‰çš„å†…å®¹éƒ½è¢«åºåˆ—åŒ–ã€‚é€šè¿‡é‡å†™åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ–¹æ³•ï¼Œä½¿å¾—å¯ä»¥åªåºåˆ—åŒ–æ•°ç»„ä¸­æœ‰å†…å®¹çš„é‚£éƒ¨åˆ†æ•°æ®ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> Object[] elementData;</span><br></pre></td></tr></table></figure>
<h1 id="å…­ã€ç½‘ç»œæ“ä½œ"><a href="#å…­ã€ç½‘ç»œæ“ä½œ" class="headerlink" title="å…­ã€ç½‘ç»œæ“ä½œ"></a>å…­ã€ç½‘ç»œæ“ä½œ</h1><p>Java ä¸­çš„ç½‘ç»œæ”¯æŒï¼š</p>
<ul>
<li><strong>InetAddress</strong>ï¼šç”¨äºè¡¨ç¤ºç½‘ç»œä¸Šçš„ç¡¬ä»¶èµ„æºï¼Œå³ <strong>IP åœ°å€</strong>ï¼›</li>
<li><strong>URL</strong>ï¼šç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼›</li>
<li><strong>Sockets</strong>ï¼šä½¿ç”¨ <strong>TCP</strong> åè®®å®ç°ç½‘ç»œé€šä¿¡ï¼›</li>
<li><strong>Datagram</strong>ï¼šä½¿ç”¨ <strong>UDP</strong> åè®®å®ç°ç½‘ç»œé€šä¿¡ã€‚</li>
</ul>
<h2 id="InetAddress"><a href="#InetAddress" class="headerlink" title="InetAddress"></a>InetAddress</h2><p>æ²¡æœ‰å…¬æœ‰çš„æ„é€ å‡½æ•°ï¼Œåªèƒ½é€šè¿‡é™æ€æ–¹æ³•æ¥åˆ›å»ºå®ä¾‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">InetAddress.getByName(String host);</span><br><span class="line">InetAddress.getByAddress(<span class="keyword">byte</span>[] address);</span><br></pre></td></tr></table></figure>
<h2 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h2><p>å¯ä»¥ç›´æ¥ä» URL ä¸­è¯»å–å­—èŠ‚æµæ•°æ®ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    URL url = <span class="keyword">new</span> URL(<span class="string">"http://www.baidu.com"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* å­—èŠ‚æµ */</span></span><br><span class="line">    InputStream is = url.openStream();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* å­—ç¬¦æµ */</span></span><br><span class="line">    InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(is, <span class="string">"utf-8"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* æä¾›ç¼“å­˜åŠŸèƒ½ */</span></span><br><span class="line">    BufferedReader br = <span class="keyword">new</span> BufferedReader(isr);</span><br><span class="line"></span><br><span class="line">    String line;</span><br><span class="line">    <span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        System.out.println(line);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    br.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Sockets"><a href="#Sockets" class="headerlink" title="Sockets"></a>Sockets</h2><ul>
<li>ServerSocketï¼šæœåŠ¡å™¨ç«¯ç±»</li>
<li>Socketï¼šå®¢æˆ·ç«¯ç±»</li>
<li>æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯é€šè¿‡ InputStream å’Œ OutputStream è¿›è¡Œè¾“å…¥è¾“å‡ºã€‚</li>
</ul>
<p><div align="center"> <img src="/Java-IO//ClienteServidorSockets1521731145260.jpg"> </div><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SocketServer</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// ç›‘å¬æŒ‡å®šçš„ç«¯å£</span></span><br><span class="line">    <span class="keyword">int</span> port = <span class="number">55533</span>;</span><br><span class="line">    ServerSocket server = <span class="keyword">new</span> ServerSocket(port);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// serverå°†ä¸€ç›´ç­‰å¾…è¿æ¥çš„åˆ°æ¥</span></span><br><span class="line">    System.out.println(<span class="string">"serverå°†ä¸€ç›´ç­‰å¾…è¿æ¥çš„åˆ°æ¥"</span>);</span><br><span class="line">    Socket socket = server.accept();	<span class="comment">// ç­‰å¾…ä¸€ä¸ªè¿æ¥</span></span><br><span class="line">    <span class="comment">// å»ºç«‹å¥½è¿æ¥åï¼Œä»socketä¸­è·å–è¾“å…¥æµï¼Œå¹¶å»ºç«‹ç¼“å†²åŒºè¿›è¡Œè¯»å–</span></span><br><span class="line">    InputStream inputStream = socket.getInputStream();</span><br><span class="line">    <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">while</span> ((len = inputStream.read(bytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">//æ³¨æ„æŒ‡å®šç¼–ç æ ¼å¼ï¼Œå‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¸€å®šè¦ç»Ÿä¸€ï¼Œå»ºè®®ä½¿ç”¨UTF-8</span></span><br><span class="line">      sb.append(<span class="keyword">new</span> String(bytes, <span class="number">0</span>, len,<span class="string">"UTF-8"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"get message from client: "</span> + sb);</span><br><span class="line">    inputStream.close();</span><br><span class="line">    socket.close();</span><br><span class="line">    server.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœåŠ¡ç«¯ç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œç­‰å¾…è¿æ¥çš„åˆ°æ¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> yiwangzhibujian.onlysend;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SocketClient</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// è¦è¿æ¥çš„æœåŠ¡ç«¯IPåœ°å€å’Œç«¯å£</span></span><br><span class="line">    String host = <span class="string">"127.0.0.1"</span>; </span><br><span class="line">    <span class="keyword">int</span> port = <span class="number">55533</span>;</span><br><span class="line">    <span class="comment">// ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥</span></span><br><span class="line">    Socket socket = <span class="keyword">new</span> Socket(host, port);</span><br><span class="line">    <span class="comment">// å»ºç«‹è¿æ¥åè·å¾—è¾“å‡ºæµ</span></span><br><span class="line">    OutputStream outputStream = socket.getOutputStream();</span><br><span class="line">    String message=<span class="string">"ä½ å¥½  yiwangzhibujian"</span>;</span><br><span class="line">    socket.getOutputStream().write(message.getBytes(<span class="string">"UTF-8"</span>));</span><br><span class="line">    write.flush();</span><br><span class="line">    outputStream.close();</span><br><span class="line">    socket.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºå®¢æˆ·ç«¯å¾€Socketçš„è¾“å‡ºæµé‡Œé¢å†™æ•°æ®ä¼ é€’ç»™æœåŠ¡ç«¯è¦æ³¨æ„ä¸€ç‚¹ï¼Œå¦‚æœå†™æ“ä½œä¹‹åç¨‹åºä¸æ˜¯å¯¹åº”ç€è¾“å‡ºæµçš„å…³é—­ï¼Œè€Œæ˜¯è¿›è¡Œå…¶ä»–é˜»å¡å¼çš„æ“ä½œï¼ˆæ¯”å¦‚ä»è¾“å…¥æµé‡Œé¢è¯»æ•°æ®ï¼‰ï¼Œè®°ä½è¦flushä¸€ä¸‹ï¼Œåªæœ‰è¿™æ ·æœåŠ¡ç«¯æ‰èƒ½æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„æ•°æ®ï¼Œå¦åˆ™å¯èƒ½ä¼šå¼•èµ·ä¸¤è¾¹æ— é™çš„äº’ç›¸ç­‰å¾…ã€‚ </p>
<h2 id="Datagram"><a href="#Datagram" class="headerlink" title="Datagram"></a>Datagram</h2><ul>
<li>DatagramPacketï¼šæ•°æ®åŒ…ç±»</li>
<li>DatagramSocketï¼šé€šä¿¡ç±»</li>
</ul>
<h1 id="ä¸ƒã€NIO"><a href="#ä¸ƒã€NIO" class="headerlink" title="ä¸ƒã€NIO"></a>ä¸ƒã€NIO</h1><ul>
<li><a href="http://tutorials.jenkov.com/java-nio/index.html" target="_blank" rel="noopener">Java NIO Tutorial</a></li>
<li><a href="https://tech.meituan.com/nio.html" target="_blank" rel="noopener">Java NIO æµ…æ</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/education/java/j-nio/j-nio.html" target="_blank" rel="noopener">IBM: NIO å…¥é—¨</a></li>
</ul>
<p>æ–°çš„è¾“å…¥/è¾“å‡º (NIO) åº“æ˜¯åœ¨ JDK 1.4 ä¸­å¼•å…¥çš„ï¼Œå¼¥è¡¥äº†åŸæ¥çš„ I/O çš„ä¸è¶³ï¼Œæä¾›äº†é«˜é€Ÿçš„ã€é¢å‘å—çš„ I/Oã€‚</p>
<p><img src="/Blog/Java/Java-IO/NIO.jpg" alt="NIO"></p>
<h2 id="æµä¸å—"><a href="#æµä¸å—" class="headerlink" title="æµä¸å—"></a>æµä¸å—</h2><p>I/O ä¸ NIO æœ€é‡è¦çš„åŒºåˆ«æ˜¯æ•°æ®æ‰“åŒ…å’Œä¼ è¾“çš„æ–¹å¼ï¼ŒI/O ä»¥æµçš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œè€Œ NIO ä»¥å—çš„æ–¹å¼å¤„ç†æ•°æ®ã€‚</p>
<p>é¢å‘æµçš„ I/O ä¸€æ¬¡å¤„ç†ä¸€ä¸ªå­—èŠ‚æ•°æ®ï¼šä¸€ä¸ªè¾“å…¥æµäº§ç”Ÿä¸€ä¸ªå­—èŠ‚æ•°æ®ï¼Œä¸€ä¸ªè¾“å‡ºæµæ¶ˆè´¹ä¸€ä¸ªå­—èŠ‚æ•°æ®ã€‚ä¸ºæµå¼æ•°æ®åˆ›å»ºè¿‡æ»¤å™¨éå¸¸å®¹æ˜“ï¼Œé“¾æ¥å‡ ä¸ªè¿‡æ»¤å™¨ï¼Œä»¥ä¾¿æ¯ä¸ªè¿‡æ»¤å™¨åªè´Ÿè´£å¤æ‚å¤„ç†æœºåˆ¶çš„ä¸€éƒ¨åˆ†ã€‚ä¸åˆ©çš„ä¸€é¢æ˜¯ï¼Œé¢å‘æµçš„ I/O é€šå¸¸ç›¸å½“æ…¢ã€‚</p>
<p>é¢å‘å—çš„ I/O ä¸€æ¬¡å¤„ç†ä¸€ä¸ªæ•°æ®å—ï¼ŒæŒ‰å—å¤„ç†æ•°æ®æ¯”æŒ‰æµå¤„ç†æ•°æ®è¦å¿«å¾—å¤šã€‚ä½†æ˜¯é¢å‘å—çš„ I/O ç¼ºå°‘ä¸€äº›é¢å‘æµçš„ I/O æ‰€å…·æœ‰çš„ä¼˜é›…æ€§å’Œç®€å•æ€§ã€‚</p>
<p>I/O åŒ…å’Œ NIO å·²ç»å¾ˆå¥½åœ°é›†æˆäº†ï¼Œjava.io.* å·²ç»ä»¥ NIO ä¸ºåŸºç¡€é‡æ–°å®ç°äº†ï¼Œæ‰€ä»¥ç°åœ¨å®ƒå¯ä»¥åˆ©ç”¨ NIO çš„ä¸€äº›ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼Œjava.io.* åŒ…ä¸­çš„ä¸€äº›ç±»åŒ…å«ä»¥å—çš„å½¢å¼è¯»å†™æ•°æ®çš„æ–¹æ³•ï¼Œè¿™ä½¿å¾—å³ä½¿åœ¨é¢å‘æµçš„ç³»ç»Ÿä¸­ï¼Œå¤„ç†é€Ÿåº¦ä¹Ÿä¼šæ›´å¿«ã€‚</p>
<h2 id="é€šé“ä¸ç¼“å†²åŒº"><a href="#é€šé“ä¸ç¼“å†²åŒº" class="headerlink" title="é€šé“ä¸ç¼“å†²åŒº"></a>é€šé“ä¸ç¼“å†²åŒº</h2><h3 id="1-é€šé“ï¼ˆChannelï¼‰"><a href="#1-é€šé“ï¼ˆChannelï¼‰" class="headerlink" title="1. é€šé“ï¼ˆChannelï¼‰"></a>1. é€šé“ï¼ˆChannelï¼‰</h3><p>é€šé“ Channel æ˜¯å¯¹åŸ I/O åŒ…ä¸­çš„æµçš„æ¨¡æ‹Ÿï¼Œå¯ä»¥é€šè¿‡å®ƒè¯»å–å’Œå†™å…¥æ•°æ®ã€‚</p>
<p>é€šé“ä¸æµçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œæµåªèƒ½åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šç§»åŠ¨(ä¸€ä¸ªæµå¿…é¡»æ˜¯ InputStream æˆ–è€… OutputStream çš„å­ç±»)ï¼Œè€Œé€šé“æ˜¯åŒå‘çš„ï¼Œå¯ä»¥ç”¨äºè¯»ã€å†™æˆ–è€…åŒæ—¶ç”¨äºè¯»å†™ã€‚</p>
<p>é€šé“åŒ…æ‹¬ä»¥ä¸‹ç±»å‹ï¼š</p>
<ul>
<li>FileChannelï¼šä»æ–‡ä»¶ä¸­è¯»å†™æ•°æ®ï¼›</li>
<li>DatagramChannelï¼šé€šè¿‡ UDP è¯»å†™ç½‘ç»œä¸­æ•°æ®ï¼›</li>
<li>SocketChannelï¼šé€šè¿‡ TCP è¯»å†™ç½‘ç»œä¸­æ•°æ®ï¼›</li>
<li>ServerSocketChannelï¼šå¯ä»¥ç›‘å¬æ–°è¿›æ¥çš„ TCP è¿æ¥ï¼Œå¯¹æ¯ä¸€ä¸ªæ–°è¿›æ¥çš„è¿æ¥éƒ½ä¼šåˆ›å»ºä¸€ä¸ª SocketChannelã€‚</li>
</ul>
<h4>å¤šè·¯å¤ç”¨ï¼šChannelä¿¡é“</h4>

<p>å¤šè·¯å¤ç”¨è¿æ¥ä¸­çš„ä¸€æ¡ç‹¬ç«‹çš„åŒå‘æ•°æ®æµé€šé“ã€‚ä¿¡é“æ˜¯å»ºç«‹åœ¨çœŸæ˜¯çš„TCPè¿æ¥å†…çš„è™šæ‹Ÿè¿æ¥ï¼Œæ•°æ®å‘é€æ¥æ”¶éƒ½ç”¨ä¿¡é“ã€‚å¯¹äºæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œå»ºç«‹å’Œé”€æ¯TCPè¿æ¥éƒ½æ˜¯éå¸¸æ˜‚è´µçš„å¼€é”€ï¼Œæ‰€ä»¥å¼•å…¥äº†ä¿¡é“ï¼Œç”¨æ¥å¤ç”¨ä¸€æ¡TCPè¿æ¥ã€‚</p>
<h3 id="2-ç¼“å†²åŒº"><a href="#2-ç¼“å†²åŒº" class="headerlink" title="2. ç¼“å†²åŒº"></a>2. ç¼“å†²åŒº</h3><p><strong>å‘é€ç»™ä¸€ä¸ªé€šé“çš„æ‰€æœ‰æ•°æ®éƒ½å¿…é¡»é¦–å…ˆæ”¾åˆ°ç¼“å†²åŒºä¸­</strong>ï¼ŒåŒæ ·åœ°ï¼Œ<strong>ä»é€šé“ä¸­è¯»å–çš„ä»»ä½•æ•°æ®éƒ½è¦å…ˆè¯»åˆ°ç¼“å†²åŒºä¸­</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ä¸ä¼šç›´æ¥å¯¹é€šé“è¿›è¡Œè¯»å†™æ•°æ®ï¼Œè€Œæ˜¯è¦å…ˆç»è¿‡ç¼“å†²åŒºã€‚</strong></p>
<p>ç¼“å†²åŒºå®è´¨ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ç¼“å†²åŒºæä¾›äº†å¯¹æ•°æ®çš„ç»“æ„åŒ–è®¿é—®ï¼Œè€Œä¸”è¿˜å¯ä»¥è·Ÿè¸ªç³»ç»Ÿçš„è¯»/å†™è¿›ç¨‹ã€‚</p>
<p>ç¼“å†²åŒºåŒ…æ‹¬ä»¥ä¸‹ç±»å‹ï¼š</p>
<ul>
<li>ByteBuffer</li>
<li>CharBuffer</li>
<li>ShortBuffer</li>
<li>IntBuffer</li>
<li>LongBuffer</li>
<li>FloatBuffer</li>
<li>DoubleBuffer</li>
</ul>
<h2 id="ç¼“å†²åŒºçŠ¶æ€å˜é‡"><a href="#ç¼“å†²åŒºçŠ¶æ€å˜é‡" class="headerlink" title="ç¼“å†²åŒºçŠ¶æ€å˜é‡"></a>ç¼“å†²åŒºçŠ¶æ€å˜é‡</h2><ul>
<li>capacityï¼šæœ€å¤§å®¹é‡ï¼›</li>
<li>positionï¼šå½“å‰å·²ç»è¯»å†™çš„å­—èŠ‚æ•°ï¼›</li>
<li>limitï¼šè¿˜å¯ä»¥è¯»å†™çš„å­—èŠ‚æ•°ã€‚</li>
</ul>
<p>çŠ¶æ€å˜é‡çš„æ”¹å˜è¿‡ç¨‹ä¸¾ä¾‹ï¼š</p>
<p>â‘  æ–°å»ºä¸€ä¸ªå¤§å°ä¸º 8 ä¸ªå­—èŠ‚çš„ç¼“å†²åŒºï¼Œæ­¤æ—¶ position ä¸º 0ï¼Œè€Œ limit = capacity = 8ã€‚capacity å˜é‡ä¸ä¼šæ”¹å˜ï¼Œä¸‹é¢çš„è®¨è®ºä¼šå¿½ç•¥å®ƒã€‚</p>
<p><div align="center"> <img src="/Blog/Java/Java-IO/1bea398f-17a7-4f67-a90b-9e2d243eaa9a.png"> </div><br></p>
<p>â‘¡ ä»è¾“å…¥é€šé“ä¸­è¯»å– 5 ä¸ªå­—èŠ‚æ•°æ®å†™å…¥ç¼“å†²åŒºä¸­ï¼Œæ­¤æ—¶ position ç§»åŠ¨è®¾ç½®ä¸º 5ï¼Œlimit ä¿æŒä¸å˜ã€‚</p>
<p><div align="center"> <img src="/Blog/Java/Java-IO/80804f52-8815-4096-b506-48eef3eed5c6.png"> </div><br></p>
<p>â‘¢ åœ¨<strong>å°†ç¼“å†²åŒºçš„æ•°æ®å†™åˆ°è¾“å‡ºé€šé“ä¹‹å‰ï¼Œéœ€è¦å…ˆè°ƒç”¨ flip() æ–¹æ³•</strong>ï¼Œè¿™ä¸ªæ–¹æ³•å°† limit è®¾ç½®ä¸ºå½“å‰ positionï¼Œå¹¶å°† position è®¾ç½®ä¸º 0ã€‚</p>
<p><div align="center"> <img src="/Blog/Java/Java-IO/952e06bd-5a65-4cab-82e4-dd1536462f38.png"> </div><br></p>
<p>â‘£ ä»ç¼“å†²åŒºä¸­å– 4 ä¸ªå­—èŠ‚åˆ°è¾“å‡ºç¼“å†²ä¸­ï¼Œæ­¤æ—¶ position è®¾ä¸º 4ã€‚</p>
<p><div align="center"> <img src="/Blog/Java/Java-IO/b5bdcbe2-b958-4aef-9151-6ad963cb28b4.png"> </div><br></p>
<p>â‘¤ æœ€åéœ€è¦è°ƒç”¨ clear() æ–¹æ³•æ¥æ¸…ç©ºç¼“å†²åŒºï¼Œæ­¤æ—¶ position å’Œ limit éƒ½è¢«è®¾ç½®ä¸ºæœ€åˆä½ç½®ã€‚</p>
<p><div align="center"> <img src="/Blog/Java/Java-IO/67bf5487-c45d-49b6-b9c0-a058d8c68902.png"> </div><br></p>
<h2 id="æ–‡ä»¶-NIO-å®ä¾‹"><a href="#æ–‡ä»¶-NIO-å®ä¾‹" class="headerlink" title="æ–‡ä»¶ NIO å®ä¾‹"></a>æ–‡ä»¶ NIO å®ä¾‹</h2><p>ä»¥ä¸‹å±•ç¤ºäº†ä½¿ç”¨ NIO å¿«é€Ÿå¤åˆ¶æ–‡ä»¶çš„å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fastCopy</span><span class="params">(String src, String dist)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* è·å¾—æºæ–‡ä»¶çš„è¾“å…¥å­—èŠ‚æµ */</span></span><br><span class="line">    FileInputStream fin = <span class="keyword">new</span> FileInputStream(src);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* è·å–è¾“å…¥å­—èŠ‚æµçš„æ–‡ä»¶é€šé“ */</span></span><br><span class="line">    FileChannel fcin = fin.getChannel();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* è·å–ç›®æ ‡æ–‡ä»¶çš„è¾“å‡ºå­—èŠ‚æµ */</span></span><br><span class="line">    FileOutputStream fout = <span class="keyword">new</span> FileOutputStream(dist);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* è·å–è¾“å‡ºå­—èŠ‚æµçš„é€šé“ */</span></span><br><span class="line">    FileChannel fcout = fout.getChannel();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ä¸ºç¼“å†²åŒºåˆ†é… 1024 ä¸ªå­—èŠ‚ */</span></span><br><span class="line">    ByteBuffer buffer = ByteBuffer.allocateDirect(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* ä»è¾“å…¥é€šé“ä¸­è¯»å–æ•°æ®åˆ°ç¼“å†²åŒºä¸­ */</span></span><br><span class="line">        <span class="keyword">int</span> r = fcin.read(buffer);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* read() è¿”å› -1 è¡¨ç¤º EOF */</span></span><br><span class="line">        <span class="keyword">if</span> (r == -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* åˆ‡æ¢è¯»å†™ */</span></span><br><span class="line">        buffer.flip();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* æŠŠç¼“å†²åŒºçš„å†…å®¹å†™å…¥è¾“å‡ºæ–‡ä»¶ä¸­ */</span></span><br><span class="line">        fcout.write(buffer);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/* æ¸…ç©ºç¼“å†²åŒº */</span></span><br><span class="line">        buffer.clear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é€‰æ‹©å™¨ï¼ˆSelectorï¼‰"><a href="#é€‰æ‹©å™¨ï¼ˆSelectorï¼‰" class="headerlink" title="é€‰æ‹©å™¨ï¼ˆSelectorï¼‰"></a>é€‰æ‹©å™¨ï¼ˆSelectorï¼‰</h2><p>NIO å¸¸å¸¸è¢«å«åš<strong>éé˜»å¡ IO</strong>ï¼Œä¸»è¦æ˜¯å› ä¸º NIO åœ¨ç½‘ç»œé€šä¿¡ä¸­çš„éé˜»å¡ç‰¹æ€§è¢«å¹¿æ³›ä½¿ç”¨ã€‚</p>
<p>NIO å®ç°äº† IO å¤šè·¯å¤ç”¨ä¸­çš„ Reactor æ¨¡å‹ï¼Œ<strong>ä¸€ä¸ªçº¿ç¨‹ Thread ä½¿ç”¨ä¸€ä¸ªé€‰æ‹©å™¨ Selector é€šè¿‡è½®è¯¢çš„æ–¹å¼å»ç›‘å¬å¤šä¸ªé€šé“ Channel ä¸Šçš„äº‹ä»¶ï¼Œä»è€Œè®©ä¸€ä¸ªçº¿ç¨‹å°±å¯ä»¥å¤„ç†å¤šä¸ªäº‹ä»¶</strong>ã€‚</p>
<p>é€šè¿‡<strong>é…ç½®ç›‘å¬çš„é€šé“ Channel ä¸ºéé˜»å¡</strong>ï¼Œé‚£ä¹ˆ<strong>å½“ Channel ä¸Šçš„ IO äº‹ä»¶è¿˜æœªåˆ°è¾¾æ—¶ï¼Œå°±ä¸ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ä¸€ç›´ç­‰å¾…ï¼Œè€Œæ˜¯ç»§ç»­è½®è¯¢å…¶å®ƒ Channel</strong>ï¼Œæ‰¾åˆ° IO äº‹ä»¶å·²ç»åˆ°è¾¾çš„ Channel æ‰§è¡Œã€‚<strong>ç±»ä¼¼ä¸€ä¸ªè§‚å¯Ÿè€…</strong></p>
<p>å› ä¸ºåˆ›å»ºå’Œåˆ‡æ¢çº¿ç¨‹çš„å¼€é”€å¾ˆå¤§ï¼Œå› æ­¤<strong>ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†å¤šä¸ªäº‹ä»¶</strong>è€Œä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ªäº‹ä»¶<strong>å…·æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚</strong></p>
<p>åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œ<strong>åªæœ‰å¥—æ¥å­— Channel æ‰èƒ½é…ç½®ä¸ºéé˜»å¡</strong>ï¼Œè€Œ FileChannel ä¸èƒ½ï¼Œä¸º FileChannel é…ç½®éé˜»å¡ä¹Ÿæ²¡æœ‰æ„ä¹‰ã€‚</p>
<p><div align="center"> <img src="/Blog/Java/Java-IO/4d930e22-f493-49ae-8dff-ea21cd6895dc.png"> </div><br></p>
<h3 id="1-åˆ›å»ºé€‰æ‹©å™¨"><a href="#1-åˆ›å»ºé€‰æ‹©å™¨" class="headerlink" title="1. åˆ›å»ºé€‰æ‹©å™¨"></a>1. åˆ›å»ºé€‰æ‹©å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Selector selector = Selector.open();</span><br></pre></td></tr></table></figure>
<h3 id="2-å°†é€šé“æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Š"><a href="#2-å°†é€šé“æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Š" class="headerlink" title="2. å°†é€šé“æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Š"></a>2. å°†é€šé“æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ServerSocketChannel ssChannel = ServerSocketChannel.open();	<span class="comment">// å¼€å¯ServerSocketé€šé“</span></span><br><span class="line">ssChannel.configureBlocking(<span class="keyword">false</span>);		<span class="comment">// é€šé“é…ç½®ä¸ºéé˜»å¡æ¨¡å¼</span></span><br><span class="line">ssChannel.register(selector, SelectionKey.OP_ACCEPT);	<span class="comment">// é€šé“æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Š</span></span><br></pre></td></tr></table></figure>
<p><strong>é€šé“å¿…é¡»é…ç½®ä¸ºéé˜»å¡æ¨¡å¼</strong>ï¼Œå¦åˆ™ä½¿ç”¨é€‰æ‹©å™¨å°±æ²¡æœ‰ä»»ä½•æ„ä¹‰äº†ï¼Œå› ä¸ºå¦‚æœé€šé“åœ¨æŸä¸ªäº‹ä»¶ä¸Šè¢«é˜»å¡ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¸èƒ½å“åº”å…¶å®ƒäº‹ä»¶ï¼Œå¿…é¡»ç­‰å¾…è¿™ä¸ªäº‹ä»¶å¤„ç†å®Œæ¯•æ‰èƒ½å»å¤„ç†å…¶å®ƒäº‹ä»¶ï¼Œæ˜¾ç„¶è¿™å’Œé€‰æ‹©å™¨çš„ä½œç”¨èƒŒé“è€Œé©°ã€‚</p>
<p>åœ¨å°†é€šé“æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Šæ—¶ï¼Œè¿˜éœ€è¦æŒ‡å®šè¦æ³¨å†Œçš„å…·ä½“äº‹ä»¶ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç±»ï¼š</p>
<ul>
<li>SelectionKey.OP_CONNECT</li>
<li>SelectionKey.OP_ACCEPT</li>
<li>SelectionKey.OP_READ</li>
<li>SelectionKey.OP_WRITE</li>
</ul>
<p>å®ƒä»¬åœ¨ SelectionKey çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> OP_READ = <span class="number">1</span> &lt;&lt; <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> OP_WRITE = <span class="number">1</span> &lt;&lt; <span class="number">2</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> OP_CONNECT = <span class="number">1</span> &lt;&lt; <span class="number">3</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> OP_ACCEPT = <span class="number">1</span> &lt;&lt; <span class="number">4</span>;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºæ¯ä¸ªäº‹ä»¶å¯ä»¥è¢«å½“æˆä¸€ä¸ªä½åŸŸï¼Œä»è€Œç»„æˆäº‹ä»¶é›†æ•´æ•°ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> interestSet = SelectionKey.OP_READ | SelectionKey.OP_WRITE;</span><br></pre></td></tr></table></figure>
<h3 id="3-ç›‘å¬äº‹ä»¶"><a href="#3-ç›‘å¬äº‹ä»¶" class="headerlink" title="3. ç›‘å¬äº‹ä»¶"></a>3. ç›‘å¬äº‹ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> num = selector.select();</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ select() æ¥ç›‘å¬åˆ°è¾¾çš„äº‹ä»¶ï¼Œå®ƒä¼šä¸€ç›´é˜»å¡ç›´åˆ°æœ‰è‡³å°‘ä¸€ä¸ªäº‹ä»¶åˆ°è¾¾ã€‚</p>
<h3 id="4-è·å–åˆ°è¾¾çš„äº‹ä»¶"><a href="#4-è·å–åˆ°è¾¾çš„äº‹ä»¶" class="headerlink" title="4. è·å–åˆ°è¾¾çš„äº‹ä»¶"></a>4. è·å–åˆ°è¾¾çš„äº‹ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;SelectionKey&gt; keys = selector.selectedKeys();</span><br><span class="line">Iterator&lt;SelectionKey&gt; keyIterator = keys.iterator();</span><br><span class="line"><span class="keyword">while</span> (keyIterator.hasNext()) &#123;</span><br><span class="line">    SelectionKey key = keyIterator.next();</span><br><span class="line">    <span class="keyword">if</span> (key.isAcceptable()) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key.isReadable()) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    keyIterator.remove();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-äº‹ä»¶å¾ªç¯"><a href="#5-äº‹ä»¶å¾ªç¯" class="headerlink" title="5. äº‹ä»¶å¾ªç¯"></a>5. äº‹ä»¶å¾ªç¯</h3><p>å› ä¸ºä¸€æ¬¡ select() è°ƒç”¨ä¸èƒ½å¤„ç†å®Œæ‰€æœ‰çš„äº‹ä»¶ï¼Œå¹¶ä¸”æœåŠ¡å™¨ç«¯æœ‰å¯èƒ½éœ€è¦ä¸€ç›´ç›‘å¬äº‹ä»¶ï¼Œå› æ­¤æœåŠ¡å™¨ç«¯å¤„ç†äº‹ä»¶çš„ä»£ç ä¸€èˆ¬ä¼šæ”¾åœ¨ä¸€ä¸ªæ­»å¾ªç¯å†…ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">    <span class="keyword">int</span> num = selector.select();</span><br><span class="line">    Set&lt;SelectionKey&gt; keys = selector.selectedKeys();</span><br><span class="line">    Iterator&lt;SelectionKey&gt; keyIterator = keys.iterator();</span><br><span class="line">    <span class="keyword">while</span> (keyIterator.hasNext()) &#123;</span><br><span class="line">        SelectionKey key = keyIterator.next();</span><br><span class="line">        <span class="keyword">if</span> (key.isAcceptable()) &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key.isReadable()) &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">        keyIterator.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¥—æ¥å­—-NIO-å®ä¾‹"><a href="#å¥—æ¥å­—-NIO-å®ä¾‹" class="headerlink" title="å¥—æ¥å­— NIO å®ä¾‹"></a>å¥—æ¥å­— NIO å®ä¾‹</h2><p><img src="/Blog/Java/Java-IO/NIO.jpg" alt="NIO"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NIOServer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        Selector selector = Selector.open();	<span class="comment">// é€‰æ‹©å™¨å¼€å¯</span></span><br><span class="line"></span><br><span class="line">        ServerSocketChannel ssChannel = ServerSocketChannel.open();	<span class="comment">// ServerSocketé€šé“å¼€å¯</span></span><br><span class="line">        ssChannel.configureBlocking(<span class="keyword">false</span>);	<span class="comment">// è®¾ç½®ä¸ºéé˜»å¡</span></span><br><span class="line">        ssChannel.register(selector, SelectionKey.OP_ACCEPT); <span class="comment">// åœ¨selectorä¸Šæ³¨å†Œä¸ºç›‘å¬æ–°è¿æ¥äº‹ä»¶</span></span><br><span class="line"></span><br><span class="line">        ServerSocket serverSocket = ssChannel.socket();	<span class="comment">// è·å¾—ServerSocketå®ä¾‹</span></span><br><span class="line">        InetSocketAddress address = <span class="keyword">new</span> InetSocketAddress(<span class="string">"127.0.0.1"</span>, <span class="number">8888</span>);	</span><br><span class="line">        serverSocket.bind(address);	<span class="comment">// æ†ç»‘åœ°å€å’Œç«¯å£</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;	<span class="comment">// ä¸»çº¿ç¨‹æ­»å¾ªç¯æ‰§è¡Œé€‰æ‹©å™¨ç›‘å¬</span></span><br><span class="line"></span><br><span class="line">            selector.select();	<span class="comment">// é˜»å¡åœ°ç›‘å¬ï¼ŒçŸ¥é“æœ‰äº‹ä»¶åˆ°è¾¾</span></span><br><span class="line">            Set&lt;SelectionKey&gt; keys = selector.selectedKeys();	<span class="comment">// å·²é€‰æ‹©é”®é›†</span></span><br><span class="line">            Iterator&lt;SelectionKey&gt; keyIterator = keys.iterator();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (keyIterator.hasNext()) &#123;</span><br><span class="line"></span><br><span class="line">                SelectionKey key = keyIterator.next();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (key.isAcceptable()) &#123;	<span class="comment">// è‹¥æ˜¯æ–°è¿æ¥äº‹ä»¶</span></span><br><span class="line"></span><br><span class="line">                    ServerSocketChannel ssChannel1 = (ServerSocketChannel) key.channel();	<span class="comment">// å–å¾—è¢«é€‰ä¸­çš„ServerSocketé€šé“</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// æœåŠ¡å™¨ä¼šä¸ºæ¯ä¸ªæ–°è¿æ¥åˆ›å»ºä¸€ä¸ª SocketChannel</span></span><br><span class="line">                    SocketChannel sChannel = ssChannel1.accept();</span><br><span class="line">                    sChannel.configureBlocking(<span class="keyword">false</span>);	<span class="comment">// Socketé€šé“è®¾ç½®ä¸ºéé˜»å¡</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// è¿™ä¸ªæ–°è¿æ¥ä¸»è¦ç”¨äºä»å®¢æˆ·ç«¯è¯»å–æ•°æ®</span></span><br><span class="line">                    sChannel.register(selector, SelectionKey.OP_READ);	<span class="comment">// é€šé“æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸ºè¯»äº‹ä»¶</span></span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key.isReadable()) &#123;	<span class="comment">// è‹¥æ˜¯è¯»äº‹ä»¶</span></span><br><span class="line"></span><br><span class="line">                    SocketChannel sChannel = (SocketChannel) key.channel();	<span class="comment">// è·å–è§¦å‘è¯»äº‹ä»¶çš„Socketé€šé“</span></span><br><span class="line">                    System.out.println(readDataFromSocketChannel(sChannel));	<span class="comment">// è°ƒç”¨äº†ä¸‹é¢çš„æ–¹æ³•è¯»å–å†…å®¹</span></span><br><span class="line">                    sChannel.close();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                keyIterator.remove();	<span class="comment">// æœ¬æ¬¡äº‹ä»¶å¤„ç†å®Œæ¯•ï¼Œç§»é™¤key</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">readDataFromSocketChannel</span><span class="params">(SocketChannel sChannel)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        ByteBuffer buffer = ByteBuffer.allocate(<span class="number">1024</span>);	<span class="comment">// å£°æ˜å­—èŠ‚ç¼“å­˜</span></span><br><span class="line">        StringBuilder data = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line"></span><br><span class="line">            buffer.clear();		<span class="comment">// è¯»åˆ°ç¼“å­˜ä¹‹å‰æ¸…ç†ç¼“å­˜</span></span><br><span class="line">            <span class="keyword">int</span> n = sChannel.read(buffer);	<span class="comment">// è¯»å–åˆ°ç¼“å­˜</span></span><br><span class="line">            <span class="keyword">if</span> (n == -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            buffer.flip();	<span class="comment">// ä»å†™æ¨¡å¼åˆ‡æ¢åˆ°è¯»æ¨¡å¼</span></span><br><span class="line">            <span class="keyword">int</span> limit = buffer.limit();</span><br><span class="line">            <span class="keyword">char</span>[] dst = <span class="keyword">new</span> <span class="keyword">char</span>[limit];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; limit; i++) &#123;</span><br><span class="line">                dst[i] = (<span class="keyword">char</span>) buffer.get(i);	<span class="comment">// ä»ç¼“å­˜é€å­—èŠ‚è¯»å–ç¼“å­˜</span></span><br><span class="line">            &#125;</span><br><span class="line">            data.append(dst);</span><br><span class="line">            buffer.clear();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NIOClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">"127.0.0.1"</span>, <span class="number">8888</span>);</span><br><span class="line">        OutputStream out = socket.getOutputStream();</span><br><span class="line">        String s = <span class="string">"hello world"</span>;</span><br><span class="line">        out.write(s.getBytes());</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å†…å­˜æ˜ å°„æ–‡ä»¶"><a href="#å†…å­˜æ˜ å°„æ–‡ä»¶" class="headerlink" title="å†…å­˜æ˜ å°„æ–‡ä»¶"></a>å†…å­˜æ˜ å°„æ–‡ä»¶</h2><p>å†…å­˜æ˜ å°„æ–‡ä»¶ I/O æ˜¯ä¸€ç§è¯»å’Œå†™æ–‡ä»¶æ•°æ®çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ¯”å¸¸è§„çš„åŸºäºæµæˆ–è€…åŸºäºé€šé“çš„ I/O å¿«å¾—å¤šã€‚</p>
<p>å‘å†…å­˜æ˜ å°„æ–‡ä»¶å†™å…¥å¯èƒ½æ˜¯å±é™©çš„ï¼Œåªæ˜¯æ”¹å˜æ•°ç»„çš„å•ä¸ªå…ƒç´ è¿™æ ·çš„ç®€å•æ“ä½œï¼Œå°±å¯èƒ½ä¼šç›´æ¥ä¿®æ”¹ç£ç›˜ä¸Šçš„æ–‡ä»¶ã€‚ä¿®æ”¹æ•°æ®ä¸å°†æ•°æ®ä¿å­˜åˆ°ç£ç›˜æ˜¯æ²¡æœ‰åˆ†å¼€çš„ã€‚</p>
<p>ä¸‹é¢ä»£ç è¡Œå°†æ–‡ä»¶çš„å‰ 1024 ä¸ªå­—èŠ‚æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œmap() æ–¹æ³•è¿”å›ä¸€ä¸ª MappedByteBufferï¼Œå®ƒæ˜¯ ByteBuffer çš„å­ç±»ã€‚å› æ­¤ï¼Œå¯ä»¥åƒä½¿ç”¨å…¶ä»–ä»»ä½• ByteBuffer ä¸€æ ·ä½¿ç”¨æ–°æ˜ å°„çš„ç¼“å†²åŒºï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨éœ€è¦æ—¶è´Ÿè´£æ‰§è¡Œæ˜ å°„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MappedByteBuffer mbb = fc.map(FileChannel.MapMode.READ_WRITE, <span class="number">0</span>, <span class="number">1024</span>);</span><br></pre></td></tr></table></figure>
<h2 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h2><p>NIO ä¸æ™®é€š I/O çš„åŒºåˆ«ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<ul>
<li>NIO æ˜¯<strong>éé˜»å¡çš„</strong></li>
<li>NIO <strong>é¢å‘å—</strong>ï¼ŒI/O é¢å‘æµ</li>
</ul>
<h1 id="å…«ã€å‚è€ƒèµ„æ–™"><a href="#å…«ã€å‚è€ƒèµ„æ–™" class="headerlink" title="å…«ã€å‚è€ƒèµ„æ–™"></a>å…«ã€å‚è€ƒèµ„æ–™</h1><ul>
<li>Eckel B, åŸƒå…‹å°”, æ˜Šé¹, ç­‰. Java ç¼–ç¨‹æ€æƒ³ [M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2002.</li>
<li><a href="https://www.ibm.com/developerworks/cn/education/java/j-nio/j-nio.html" target="_blank" rel="noopener">IBM: NIO å…¥é—¨</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/java/j-lo-javaio/index.html" target="_blank" rel="noopener">IBM: æ·±å…¥åˆ†æ Java I/O çš„å·¥ä½œæœºåˆ¶</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/index.htm" target="_blank" rel="noopener">IBM: æ·±å…¥åˆ†æ Java ä¸­çš„ä¸­æ–‡ç¼–ç é—®é¢˜</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/java/j-lo-serial/index.html" target="_blank" rel="noopener">IBM: Java åºåˆ—åŒ–çš„é«˜çº§è®¤è¯†</a></li>
<li><a href="http://blog.csdn.net/shimiso/article/details/24990499" target="_blank" rel="noopener">NIO ä¸ä¼ ç»Ÿ IO çš„åŒºåˆ«</a></li>
<li><a href="http://stg-tud.github.io/sedc/Lecture/ws13-14/5.3-Decorator.html#mode=document" target="_blank" rel="noopener">Decorator Design Pattern</a></li>
<li><a href="http://labojava.blogspot.com/2012/12/socket-multicast.html" target="_blank" rel="noopener">Socket Multicast</a></li>
</ul>

      
    </div>
    
    
    

	<div>
	      
	        
	      
	</div>

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/Blog/tags/Java/" rel="tag"># Java</a>
          
            <a href="/Blog/tags/NIO/" rel="tag"># NIO</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/Blog/Java/Netty/" rel="next" title="Netty">
                <i class="fa fa-chevron-left"></i> Netty
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/Blog/DataBase/æ•°æ®åº“ç³»ç»ŸåŸç†/" rel="prev" title="æ•°æ®åº“ç³»ç»ŸåŸç†">
                æ•°æ®åº“ç³»ç»ŸåŸç† <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/Blog/images/head.jpg"
                alt="Aaron.H" />
            
              <p class="site-author-name" itemprop="name">Aaron.H</p>
              <p class="site-description motion-element" itemprop="description">Road endless its long and far, I will seek up and downï¼</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/Blog/archives/">
              
                  <span class="site-state-item-count">41</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/Blog/categories/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/Blog/tags/index.html">
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/Blog/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#å‰è¨€"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä¸€ã€æ¦‚è§ˆ"><span class="nav-number">2.</span> <span class="nav-text">ä¸€ã€æ¦‚è§ˆ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#äºŒã€ç£ç›˜æ“ä½œ"><span class="nav-number">3.</span> <span class="nav-text">äºŒã€ç£ç›˜æ“ä½œ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä¸‰ã€å­—èŠ‚æ“ä½œ"><span class="nav-number">4.</span> <span class="nav-text">ä¸‰ã€å­—èŠ‚æ“ä½œ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å››ã€å­—ç¬¦æ“ä½œ"><span class="nav-number">5.</span> <span class="nav-text">å››ã€å­—ç¬¦æ“ä½œ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#äº”ã€å¯¹è±¡æ“ä½œ"><span class="nav-number">6.</span> <span class="nav-text">äº”ã€å¯¹è±¡æ“ä½œ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å…­ã€ç½‘ç»œæ“ä½œ"><span class="nav-number">7.</span> <span class="nav-text">å…­ã€ç½‘ç»œæ“ä½œ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#InetAddress"><span class="nav-number">7.1.</span> <span class="nav-text">InetAddress</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#URL"><span class="nav-number">7.2.</span> <span class="nav-text">URL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Sockets"><span class="nav-number">7.3.</span> <span class="nav-text">Sockets</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Datagram"><span class="nav-number">7.4.</span> <span class="nav-text">Datagram</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä¸ƒã€NIO"><span class="nav-number">8.</span> <span class="nav-text">ä¸ƒã€NIO</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#æµä¸å—"><span class="nav-number">8.1.</span> <span class="nav-text">æµä¸å—</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é€šé“ä¸ç¼“å†²åŒº"><span class="nav-number">8.2.</span> <span class="nav-text">é€šé“ä¸ç¼“å†²åŒº</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-é€šé“ï¼ˆChannelï¼‰"><span class="nav-number">8.2.1.</span> <span class="nav-text">1. é€šé“ï¼ˆChannelï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#undefined"><span class="nav-number">8.2.1.1.</span> <span class="nav-text">å¤šè·¯å¤ç”¨ï¼šChannelä¿¡é“</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-ç¼“å†²åŒº"><span class="nav-number">8.2.2.</span> <span class="nav-text">2. ç¼“å†²åŒº</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç¼“å†²åŒºçŠ¶æ€å˜é‡"><span class="nav-number">8.3.</span> <span class="nav-text">ç¼“å†²åŒºçŠ¶æ€å˜é‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ–‡ä»¶-NIO-å®ä¾‹"><span class="nav-number">8.4.</span> <span class="nav-text">æ–‡ä»¶ NIO å®ä¾‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é€‰æ‹©å™¨ï¼ˆSelectorï¼‰"><span class="nav-number">8.5.</span> <span class="nav-text">é€‰æ‹©å™¨ï¼ˆSelectorï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-åˆ›å»ºé€‰æ‹©å™¨"><span class="nav-number">8.5.1.</span> <span class="nav-text">1. åˆ›å»ºé€‰æ‹©å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-å°†é€šé“æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Š"><span class="nav-number">8.5.2.</span> <span class="nav-text">2. å°†é€šé“æ³¨å†Œåˆ°é€‰æ‹©å™¨ä¸Š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-ç›‘å¬äº‹ä»¶"><span class="nav-number">8.5.3.</span> <span class="nav-text">3. ç›‘å¬äº‹ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-è·å–åˆ°è¾¾çš„äº‹ä»¶"><span class="nav-number">8.5.4.</span> <span class="nav-text">4. è·å–åˆ°è¾¾çš„äº‹ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-äº‹ä»¶å¾ªç¯"><span class="nav-number">8.5.5.</span> <span class="nav-text">5. äº‹ä»¶å¾ªç¯</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¥—æ¥å­—-NIO-å®ä¾‹"><span class="nav-number">8.6.</span> <span class="nav-text">å¥—æ¥å­— NIO å®ä¾‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å†…å­˜æ˜ å°„æ–‡ä»¶"><span class="nav-number">8.7.</span> <span class="nav-text">å†…å­˜æ˜ å°„æ–‡ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¯¹æ¯”"><span class="nav-number">8.8.</span> <span class="nav-text">å¯¹æ¯”</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å…«ã€å‚è€ƒèµ„æ–™"><span class="nav-number">9.</span> <span class="nav-text">å…«ã€å‚è€ƒèµ„æ–™</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Aaron.H</span>

  
</div>


<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  æœ¬ç«™è®¿å®¢æ•°:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

<!--

  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>

-->



<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">åšå®¢å…¨ç«™å…±82.2kå­—</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/Blog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/Blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/Blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/Blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/Blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/Blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/Blog/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/Blog/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/Blog/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/Blog/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/Blog/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
